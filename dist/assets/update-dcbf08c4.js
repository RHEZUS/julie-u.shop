import{B as E}from"./index-41c6b6d6.js";import{B as I}from"./index-0543b3cb.js";import{_ as S,u as T,f as _,a,d as o,g as n,w as k,h as q,r as d,o as i,F as f,b as y,e as V,k as w}from"./index-9b4a819b.js";import{C as F}from"./index-7b8fc2af.js";import{T as B}from"./index-eeb0c03b.js";import{T as O}from"./index-0bf1bfaa.js";import{S as P}from"./index-e41c3d5a.js";import{F as N}from"./index-5092a103.js";import{S as j}from"./index-6a0272ce.js";import"./index-9a8c00d9.js";import"./vue-cleave.min-7d0aa8cb.js";const D={data(){return{toast:T(),product:{title:"",description:"",brand_id:null,category_id:null,images:null,price:"",quantity:"",status:"draft",variants:[],options:[]},addVariant:!1,categories:[],brands:[],formErrors:{title:"",slug:"",description:"",brand_id:"",category_id:"",tags:"",images:[],price:"",status:"",variants:{title:"",price:"",sku:"",option1:"",option2:"",barcode:"",grams:"",weight:"",inventory_quantity:""},options:{name:"",position:"",values:""}}}},components:{Breadcrumb:E,Button:I,Card:F,Textinput:B,Textarea:O,Select:P,FileInput:N,Switch:j},watch:{"product.options":{handler:"updateNew OneVariants",deep:!0}},methods:{async createProduct(){this.errors=[],this.product.variants.length===0&&this.createVariant(),console.log(this.product),await _.post("/api/admin/product/create",this.product,{headers:{"Content-Type":"multipart/form-data"}}).then(s=>{this.toast.success("Product created successfully",{timeout:2e3}),console.log(s)}).catch(s=>{this.toast.error("Failed to create product",{timeout:2e3}),console.log(s)})},createVariant(){this.product.variants.push({title:this.product.title,price:this.product.price||"0",inventory_quantity:this.product.quantity||"0"})},addOption(s){this.product.options.push({name:"",position:s+1,values:[]})},removeOption(s){this.product.options.splice(s,1)},showVariants(){return!!(this.product.options.length>0&&this.product.options.every(s=>s.values.length>0))},generateVariants(s){if(s.length===0)return[];const r=s.filter(e=>e.values.length>0),c=e=>e.reduce((p,u)=>p.flatMap(h=>u.map(g=>[...h,g])),[[]]),m=r.map(e=>e.values);return c(m)},updateVariants(){const s=this.generateVariants(this.product.options),r=[];s.forEach(c=>{const m=c.join(" - "),e=this.product.variants.find(p=>p.option1===c[0]&&p.option2===c[1]);e?r.push({...e,title:m}):r.push({title:m,price:this.product.price||"0",sku:"",option1:c[0]||"",option2:c[1]||"",barcode:"",grams:0,weight:0,inventory_quantity:this.product.quantity||"0"})}),this.product.variants=r,console.log(this.product)},addValue(s){this.product.options[s].values.push("")},removeValue(s,r){this.product.options[s].values.splice(r,1)},handleFileSelected(s){this.product.images=s,console.log(this.product.images)},async fetchData(){try{const[s,r,c]=await Promise.all([_.get("/api/admin/brands/id-name"),_.get("/api/admin/categories/id-name"),_.get(`/product/slug/${this.$route.params.slug}`)]);this.brands=s.data.categories,this.categories=r.data.brands,this.product=c.data.product,console.log(this.product)}catch(s){console.error("Error fetching brands and categories:",s)}}},mounted(){this.fetchData()}},M={class:""},z=o("div",{class:"md:flex justify-between pb-6 md:space-y-0 space-y-3 items-center"},[o("h5",null,"Create new product")],-1),A={class:"text-base text-slate-600 dark:text-slate-300 grid grid-cols-12 items-center gap-4"},Q={class:"cols-span-12 md:col-span-6"},R={class:"cols-span-12 md:col-span-6"},L={class:"cols-span-12 md:col-span-6"},G={class:"col-span-12 sm:col-span-6"},H={class:"col-span-12"},J={class:"cols-span-12 md:col-span-6"},K={class:"cols-span-12 md:col-span-6"},W={class:"col-span-12 sm:col-span-6"},X=o("div",{class:"md:flex justify-between pb-6 md:space-y-0 space-y-3 items-center"},[o("h5",null,"Product Variants")],-1),Y={key:0,class:"text-base text-slate-600 dark:text-slate-300 items-center gap-4 border rounded-lg"},Z={class:"w-full flex flex-col gap-2"},$=o("label",{for:""},"Option Name",-1),ee={class:"col-span-12 pl-3 py-2 flex flex-col gap-2"},te=o("h5",{class:"text-lg text-slate-600 dark:text-slate-300"},"Values",-1),oe=["onClick"],re=o("i",{class:"bx bxs-trash"},null,-1),se=[re],le={key:1,class:"w-full relative"},ne={class:"flex items-center justify-between py-2"},ae={key:0,class:"text-blue-600 pointer-events-auto p-3 col-span-12"},ie=o("i",{class:"bx bx-plus"},null,-1),pe={key:1,class:"text-blue-600 pointer-events-auto"},ue=o("i",{class:"bx bx-plus"},null,-1),ce={key:2,class:"mt-8"},de=o("tr",null,[o("th",{class:"text-left"},"Title"),o("th",{class:"text-left"},"Price"),o("th",{class:"text-left"},"Inventory Quantity")],-1),me={class:"col-span-12 py-3 flex justify-end space-x-3 border-t border-slate-100 dark:border-slate-700"};function he(s,r,c,m,e,p){const u=d("Textinput"),h=d("Select"),g=d("FileInput"),C=d("Textarea"),U=d("Switch"),b=d("Card"),x=d("Button");return i(),a("div",M,[o("form",{onSubmit:r[9]||(r[9]=q(t=>p.createProduct(),["prevent"])),class:"flex flex-col gap-4 relative z-[100]"},[n(b,{noborder:""},{default:k(()=>[z,o("div",A,[o("div",Q,[n(u,{type:"text",placeholder:"Full Name",name:"name",modelValue:e.product.title,"onUpdate:modelValue":r[0]||(r[0]=t=>e.product.title=t),error:e.formErrors.title,classInput:"h-[48px]"},null,8,["modelValue","error"])]),o("div",R,[n(h,{modelValue:e.product.category_id,"onUpdate:modelValue":r[1]||(r[1]=t=>e.product.category_id=t),error:e.formErrors.category_id,options:e.categories,placeholder:"Select category",classInput:"h-[48px]"},null,8,["modelValue","error","options"])]),o("div",L,[n(h,{modelValue:e.product.brand_id,"onUpdate:modelValue":r[2]||(r[2]=t=>e.product.brand_id=t),error:e.formErrors.brand_id,options:e.brands,placeholder:"Select Brand",classInput:"h-[48px]"},null,8,["modelValue","error","options"])]),o("div",G,[n(g,{ref:"fileInput",multiple:"",error:e.formErrors.images,preview:"",name:"preview",onInput:p.handleFileSelected},null,8,["error","onInput"])]),o("div",H,[n(C,{placeholder:"Description of the product",modelValue:e.product.description,"onUpdate:modelValue":r[3]||(r[3]=t=>e.product.description=t),error:e.formErrors.description,hasicon:"",classInput:"min-h-[48px]"},null,8,["modelValue","error"])]),o("div",J,[n(u,{type:"text",placeholder:"Price",modelValue:e.product.price,"onUpdate:modelValue":r[4]||(r[4]=t=>e.product.price=t),error:e.formErrors.price,classInput:"h-[48px]"},null,8,["modelValue","error"])]),o("div",K,[n(u,{type:"number",placeholder:"Quantity",modelValue:e.product.quantity,"onUpdate:modelValue":r[5]||(r[5]=t=>e.product.quantity=t),error:e.formErrors.price,classInput:"h-[48px]"},null,8,["modelValue","error"])]),o("div",W,[n(U,{label:"Is published",class:"",modelValue:e.product.status,"onUpdate:modelValue":r[6]||(r[6]=t=>e.product.status=t),activeClass:"bg-primary-500",active:!!e.product.status},null,8,["modelValue","active"])])])]),_:1}),n(b,{noborder:""},{default:k(()=>[X,e.product.options.length>0?(i(),a("div",Y,[(i(!0),a(f,null,y(e.product.options.length,t=>(i(),a("div",{class:"border-b p-2",key:t},[o("div",Z,[$,n(u,{type:"text",placeholder:"Option name",name:"name",modelValue:e.product.options[t-1].name,"onUpdate:modelValue":l=>e.product.options[t-1].name=l,error:e.formErrors.options.name,classInput:"h-[35px]"},null,8,["modelValue","onUpdate:modelValue","error"])]),o("div",ee,[te,e.product.options[t-1].values.length>1?(i(!0),a(f,{key:0},y(e.product.options[t-1].values.length,l=>(i(),a("div",{class:"w-full relative",key:l},[n(u,{type:"text",placeholder:"Medium",name:"name",modelValue:e.product.options[t-1].values[l],"onUpdate:modelValue":v=>e.product.options[t-1].values[l]=v,error:e.formErrors.options.values,classInput:"h-[35px]"},null,8,["modelValue","onUpdate:modelValue","error"]),l!==e.product.options[t-1].values.length?(i(),a("button",{key:0,type:"button",onClick:v=>p.removeValue(t-1,l),class:"h-8 flex items-center absolute z-[100] top-0 right-2"},se,8,oe)):V("",!0)]))),128)):(i(),a("div",le,[(i(),a(f,null,y(1,l=>n(u,{key:l,type:"text",placeholder:"Medium",name:"name",modelValue:e.product.options[t-1].values[l],"onUpdate:modelValue":v=>e.product.options[t-1].values[l]=v,error:e.formErrors.options.values,classInput:"h-[35px]"},null,8,["modelValue","onUpdate:modelValue","error"])),64))])),o("div",ne,[n(x,{type:"button",text:"Delete",onClick:l=>p.removeOption(t-1),btnClass:"btn-danger h-8 flex items-center"},null,8,["onClick"])])])]))),128)),e.product.options.length<2?(i(),a("div",ae,[o("button",{onClick:r[7]||(r[7]=t=>p.addOption()),type:"button",class:""},[ie,w(" Add another options")])])):V("",!0)])):(i(),a("div",pe,[o("button",{onClick:r[8]||(r[8]=t=>p.addOption()),type:"button",class:""},[ue,w(" Add options like color or size")])])),p.showVariants()?(i(),a("div",ce,[o("table",null,[de,(i(!0),a(f,null,y(e.product.variants.length,t=>(i(),a("tr",{key:t},[o("td",null,[n(u,{type:"text",placeholder:"Title",name:"title",modelValue:e.product.variants[t-1].title,"onUpdate:modelValue":l=>e.product.variants[t-1].title=l,error:e.formErrors.variants.title,classInput:"h-[35px]"},null,8,["modelValue","onUpdate:modelValue","error"])]),o("td",null,[n(u,{type:"text",placeholder:"Price",name:"price",modelValue:e.product.variants[t-1].price,"onUpdate:modelValue":l=>e.product.variants[t-1].price=l,error:e.formErrors.variants.price,classInput:"h-[35px]"},null,8,["modelValue","onUpdate:modelValue","error"])]),o("td",null,[n(u,{type:"number",placeholder:"Inventory Quantity",name:"inventory_quantity",modelValue:e.product.variants[t-1].inventory_quantity,"onUpdate:modelValue":l=>e.product.variants[t-1].inventory_quantity=l,error:e.formErrors.variants.inventory_quantity,classInput:"h-[35px]"},null,8,["modelValue","onUpdate:modelValue","error"])])]))),128))])])):V("",!0)]),_:1}),o("div",me,[n(x,{type:"submit",text:"Save",btnClass:"btn-primary h-10 flex items-center"})])],32)])}const Ue=S(D,[["render",he]]);export{Ue as default};
