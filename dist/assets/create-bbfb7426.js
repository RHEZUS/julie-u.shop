import{B as q}from"./index-9b1a717e.js";import{B as E}from"./index-c825509e.js";import{_ as S,u as F,f as b,a,d as t,g as i,w as C,e as m,h as T,r as f,o as n,F as g,b as y,k as w,t as B,i as I}from"./index-47c70d24.js";import{C as O}from"./index-fdbdfb57.js";import{T as z}from"./index-253d4462.js";import{T as P}from"./index-c8f2f0ea.js";import{S as j}from"./index-594d5b9d.js";import{F as N}from"./index-052bf9a9.js";import{S as A}from"./index-0a30886c.js";import"./index-61dc0fab.js";import"./vue-cleave.min-2c4d7fec.js";const D={data(){return{toast:F(),product:{title:"",description:"",brand_id:null,category_id:null,image:null,price:"",quantity:"",status:"draft",variants:[],options:[]},isCreating:!1,categories:[],brands:[],formErrors:{title:"",slug:"",description:"",brand_id:"",category_id:"",tags:"",image:"",price:"",status:"",variants:{title:"",price:"",sku:"",option1:"",option2:"",barcode:"",grams:"",weight:"",inventory_quantity:""},options:{name:"",position:"",values:""}}}},components:{Breadcrumb:q,Button:E,Card:O,Textinput:z,Textarea:P,Select:j,FileInput:N,Switch:A},watch:{"product.options":{handler(s){this.generateVariants(s)},deep:!0}},methods:{async createProduct(){this.isCreating=!0,this.errors=[],this.product.variants.length===0&&this.createVariant(),console.log(this.product),await b.post("/api/admin/product/create",this.product,{headers:{"Content-Type":"multipart/form-data"}}).then(s=>{this.toast.success("Product created successfully",{timeout:2e3}),console.log(s),this.clearForm()}).catch(s=>{this.toast.error("Failed to create product",{timeout:2e3}),console.log(s)}),this.isCreating=!1},createVariant(){this.product.variants.push({title:this.product.title,price:this.product.price||0,inventory_quantity:this.product.quantity||0})},addOption(s){this.product.options.push({name:"",position:s+1,values:[{value:"",images:[]}]}),console.log(this.product.options)},removeOption(s){this.product.options.splice(s,1)},showVariants(){return!!(this.product.options.length>0&&this.product.options.every(s=>s.values.length>0))},generateVariants(s){const r=s.find(l=>l.name.toLowerCase()==="color"),d=s.find(l=>l.name.toLowerCase()==="size"),h=r&&r.values?r.values.map(l=>l.value):[],e=d&&d.values?d.values.map(l=>l.value):[];this.product.variants=[],h.length&&e.length?h.forEach(l=>{e.forEach(c=>{this.product.variants.push({title:`${l} - ${c}`,option1:l,option2:c,price:this.product.price||"0",sku:null,barcode:null,grams:0,weight:0,inventory_quantity:this.product.quantity||"0"})})}):h.length?h.forEach(l=>{this.product.variants.push({title:`${l}`,option1:l,option2:null,price:this.product.price||"0",sku:null,barcode:null,grams:0,weight:0,inventory_quantity:this.product.quantity||"0"})}):e.length&&e.forEach(l=>{this.product.variants.push({title:`${l}`,option1:null,option2:l,price:this.product.price||"0",sku:null,barcode:null,grams:0,weight:0,inventory_quantity:this.product.quantity||"0"})})},clearForm(){this.product={title:"",description:"",brand_id:null,category_id:null,image:null,price:"",quantity:"",status:"draft",variants:[],options:[]}},addValue(s){this.product.options[s].values.push({value:"",images:[]})},removeValue(s,r){this.product.options[s].values.splice(r,1)},handleFileUpload(s){this.product.image=s.target.files[0]},handleOptionFileSelected(s,r,d){this.product.options[r].values[d].images=Array.from(s.target.files),console.log(this.product)},async fetchCategories(){await b.get("/api/admin/categories/id-name",{withCredentials:!0}).then(s=>{this.categories=s.data.categories}).catch(s=>{this.toast.error("Failed to fetch categories",{timeout:2e3})})},async fetchBrands(){await b.get("/api/admin/brands/id-name",{withCredentials:!0}).then(s=>{this.brands=s.data.brands}).catch(s=>{this.toast.error("Failed to fetch brands",{timeout:2e3})})}},mounted(){this.fetchCategories(),this.fetchBrands()}},L={class:""},Q=t("div",{class:"md:flex justify-between pb-6 md:space-y-0 space-y-3 items-center"},[t("h5",null,"Create new product")],-1),M={class:"text-base text-slate-600 dark:text-slate-300 grid grid-cols-12 items-center gap-4"},G={class:"cols-span-12 md:col-span-6"},H={class:"cols-span-12 md:col-span-6"},J={class:"cols-span-12 md:col-span-6"},K={class:"col-span-12 sm:col-span-6"},R={class:"col-span-12"},W={class:"cols-span-12 md:col-span-6"},X={class:"cols-span-12 md:col-span-6"},Y={class:"col-span-12 sm:col-span-6"},Z=t("div",{class:"md:flex justify-between pb-6 md:space-y-0 space-y-3 items-center"},[t("h5",null,"Product Variants")],-1),$={key:0,class:"text-base text-slate-600 dark:text-slate-300 items-center gap-4 rounded-lg"},ee={class:""},te={class:"flex justify-between py-2"},oe=t("label",{for:""}," Option Name ",-1),se=["onClick"],re=t("span",{class:"text-base"}," Delete option ",-1),le=[re],ie={class:""},ae={class:"flex justify-between py-2"},ne=t("label",{for:""}," Option Values ",-1),ue=["onClick"],ce=t("i",{class:"bx bx-plus"},null,-1),de={class:"text-base"},pe={class:"grid grid-cols-12 relative gap-2 pr-10 items-center justify-between mt-3"},me={key:0,class:"col-span-6"},he=["onChange"],fe=["onClick"],_e=t("i",{class:"bx bx-trash"},null,-1),ve=[_e],be={key:1,class:"text-blue-600 pointer-events-auto"},ge=t("i",{class:"bx bx-plus"},null,-1),ye={key:2,class:"mt-8"},xe={class:"table-auto w-full"},Ve=t("tr",null,[t("th",{class:"text-left"},"Title"),t("th",{class:"text-left"},"Price"),t("th",{class:"text-left"},"Inventory Quantity")],-1),Ce={class:"col-span-12 py-3 flex justify-end space-x-3 border-t border-slate-100 dark:border-slate-700"},we={key:0,type:"submit",class:"bg-blue-500 text-white h-8 px-3 flex items-center"},ke={key:1,type:"button",class:"bg-blue-500 text-white h-8 px-3 flex items-center"};function Ue(s,r,d,h,e,l){const c=f("Textinput"),v=f("Select"),k=f("Textarea"),U=f("Switch"),x=f("Card");return n(),a("div",L,[t("form",{onSubmit:r[9]||(r[9]=T(o=>l.createProduct(),["prevent"])),class:"flex flex-col gap-4 relative z-[100]"},[i(x,{noborder:""},{default:C(()=>[Q,t("div",M,[t("div",G,[i(c,{type:"text",placeholder:"Name of the product",name:"name",modelValue:e.product.title,"onUpdate:modelValue":r[0]||(r[0]=o=>e.product.title=o),error:e.formErrors.title,classInput:"h-[48px]"},null,8,["modelValue","error"])]),t("div",H,[i(v,{modelValue:e.product.category_id,"onUpdate:modelValue":r[1]||(r[1]=o=>e.product.category_id=o),error:e.formErrors.category_id,options:e.categories,placeholder:"Select category",classInput:"h-[48px]"},null,8,["modelValue","error","options"])]),t("div",J,[i(v,{modelValue:e.product.brand_id,"onUpdate:modelValue":r[2]||(r[2]=o=>e.product.brand_id=o),error:e.formErrors.brand_id,options:e.brands,placeholder:"Select Brand",classInput:"h-[48px]"},null,8,["modelValue","error","options"])]),t("div",K,[t("input",{type:"file",name:"file-input-medium",id:"file-input-medium",onChange:r[3]||(r[3]=(...o)=>l.handleFileUpload&&l.handleFileUpload(...o)),class:"block w-full border border-gray-200 shadow-sm rounded-lg text-sm focus:z-10 focus:border-blue-500 focus:ring-blue-500 file:bg-gray-50 file:border-0 file:me-4 file:py-3 file:px-4"},null,32)]),t("div",R,[i(k,{placeholder:"Description of the product",modelValue:e.product.description,"onUpdate:modelValue":r[4]||(r[4]=o=>e.product.description=o),error:e.formErrors.description,hasicon:"",classInput:"min-h-[48px]"},null,8,["modelValue","error"])]),t("div",W,[i(c,{type:"text",placeholder:"Price",modelValue:e.product.price,"onUpdate:modelValue":r[5]||(r[5]=o=>e.product.price=o),error:e.formErrors.price,classInput:"h-[48px]"},null,8,["modelValue","error"])]),t("div",X,[i(c,{type:"number",placeholder:"Quantity",modelValue:e.product.quantity,"onUpdate:modelValue":r[6]||(r[6]=o=>e.product.quantity=o),error:e.formErrors.price,classInput:"h-[48px]"},null,8,["modelValue","error"])]),t("div",Y,[i(U,{label:"Is published",class:"",modelValue:e.product.status,"onUpdate:modelValue":r[7]||(r[7]=o=>e.product.status=o),activeClass:"bg-primary-500",active:!!e.product.status},null,8,["modelValue","active"])])])]),_:1}),i(x,{noborder:""},{default:C(()=>[Z,e.product.options.length>0?(n(),a("div",$,[(n(!0),a(g,null,y(e.product.options,(o,u)=>(n(),a("div",{class:"p-2 flex flex-col gap-2 relative border mb-2",key:u},[t("div",ee,[t("div",te,[oe,t("button",{onClick:p=>l.removeOption(u),type:"button",class:"float-end text-xl text-danger-600 flex items-center"},le,8,se)]),i(v,{modelValue:o.name,"onUpdate:modelValue":p=>o.name=p,error:e.formErrors.options.name,options:[{label:"Color",value:"color"},{label:"Size",value:"size"}],placeholder:"Select option",classInput:"h-[35px]"},null,8,["modelValue","onUpdate:modelValue","error"])]),t("div",ie,[t("div",ae,[ne,t("button",{onClick:p=>l.addValue(u),type:"button",class:"float-end text-xl text-blue-600 flex items-center"},[ce,w(),t("span",de," Add another "+B(o.name?o.name:"Value"),1)],8,ue)]),(n(!0),a(g,null,y(o.values,(p,V)=>(n(),a("div",pe,[t("div",{class:I(["",{"col-span-6":o.name=="color","col-span-12":o.name!="color"}])},[i(c,{type:"text' ",placeholder:"Value",modelValue:p.value,"onUpdate:modelValue":_=>p.value=_,error:e.formErrors.options.values,classInput:"h-[35px]"},null,8,["modelValue","onUpdate:modelValue","error"])],2),o.name=="color"?(n(),a("div",me,[t("input",{type:"file",multiple:"",name:"file-input-medium",id:"file-input-medium",onChange:_=>l.handleOptionFileSelected(_,u,V),class:"block w-full border border-gray-200 shadow-sm rounded-lg text-sm focus:z-10 focus:border-blue-500 focus:ring-blue-500 file:bg-gray-50 file:border-0 file:me-4 file:py-3 file:px-4"},null,40,he)])):m("",!0),t("button",{onClick:_=>l.removeValue(u,V),type:"button",class:"float-end text-xl absolute top-0 bottom-0 right-0"},ve,8,fe)]))),256))])]))),128))])):m("",!0),e.product.options.length<2?(n(),a("div",be,[t("button",{onClick:r[8]||(r[8]=o=>l.addOption()),type:"button",class:""},[ge,w(" Add options like color or size")])])):m("",!0),l.showVariants()?(n(),a("div",ye,[t("table",xe,[Ve,(n(!0),a(g,null,y(e.product.variants.length,o=>(n(),a("tr",{key:o},[t("td",null,[i(c,{type:"text",placeholder:"Title",name:"title",modelValue:e.product.variants[o-1].title,"onUpdate:modelValue":u=>e.product.variants[o-1].title=u,error:e.formErrors.variants.title,classInput:"h-[35px]"},null,8,["modelValue","onUpdate:modelValue","error"])]),t("td",null,[i(c,{type:"text",placeholder:"Price",name:"price",modelValue:e.product.variants[o-1].price,"onUpdate:modelValue":u=>e.product.variants[o-1].price=u,error:e.formErrors.variants.price,classInput:"h-[35px]"},null,8,["modelValue","onUpdate:modelValue","error"])]),t("td",null,[i(c,{type:"number",placeholder:"Inventory Quantity",name:"inventory_quantity",modelValue:e.product.variants[o-1].inventory_quantity,"onUpdate:modelValue":u=>e.product.variants[o-1].inventory_quantity=u,error:e.formErrors.variants.inventory_quantity,classInput:"h-[35px]"},null,8,["modelValue","onUpdate:modelValue","error"])])]))),128))])])):m("",!0)]),_:1}),t("div",Ce,[e.isCreating==!1?(n(),a("button",we,"Save")):m("",!0),e.isCreating==!0?(n(),a("button",ke,"Creating...")):m("",!0)])],32)])}const Ne=S(D,[["render",Ue]]);export{Ne as default};
