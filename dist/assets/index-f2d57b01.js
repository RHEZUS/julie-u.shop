import{T as N}from"./index-9d366d4d.js";import{D as q}from"./index-70bc79d0.js";import{C as R}from"./index-cd45ef30.js";import{I as j}from"./index-a29ad72f.js";import{I as $}from"./index-977355d2.js";import{P as A}from"./index-285e41ba.js";import{B as k}from"./index-68000b46.js";import{M as B}from"./Modal-97fdf6ac.js";import{T as I}from"./index-5b654280.js";import{T as U}from"./index-9cd75a48.js";import{S as G}from"./index-327da444.js";import{c as C,a as M}from"./array-c950f128.js";import{_ as D,u as T,A as O,f as _,r as n,o as d,a as m,g as r,w as c,d as s,c as z,l as F,h as L,t as f,e as u,j as Q,p as H,q as J}from"./index-c8e4a2fa.js";import{B as K}from"./index-5f286e9a.js";import{b as W}from"./menu-ccd6d5b7.js";import"./utils-54aeb6c8.js";import"./vue-cleave.min-92c0128c.js";import"./transition-1731c41f.js";import"./focus-management-3bb78bbd.js";import"./keyboard-1bc9e9dc.js";import"./use-outside-click-ea2b4200.js";import"./hidden-a469f5a9.js";import"./micro-task-89dcd6af.js";import"./open-closed-548470af.js";import"./use-resolve-button-type-12f65ad1.js";const X={data(){return{form:{name:"",desc:""},nameError:"",descError:"",toast:T(),router:O(),formOptions:[],storing:!1}},components:{Modal:B,Button:k,Textinput:I,Select:G,Textarea:U},props:{formMode:{type:String,required:!0},loadData:{type:Function,required:!0}},methods:{loadEditData(t){this.form.id=t.id,this.form.name=t.name},resetForm(){this.form.name="",this.nameError=""},createItem(){this.storing=!0,C({name:M().required("Name is required")}).validate({name:this.form.name}).then(()=>{_.post("/api/admin/brand/create",this.form,{withCredentials:!0}).then(e=>{this.$refs.modal1.closeModal(),this.toast.success("Registered successfully",{timeout:2e3}),this.resetForm(),this.loadData(),console.log(e),this.storing=!1}).catch(e=>{const i=e.response.data.errors;i.hasOwnProperty("name")&&(this.nameError=i.name[0]),this.toast.error(e.message,{timeout:6e3}),this.storing=!1})}).catch(e=>{e.path==="name"&&(this.nameError=e.errors[0]),this.storing=!1})},updateItem(){this.storing=!0,C({name:M().required("Name is required")}).validate({name:this.form.name}).then(()=>{_.put(`/api/admin/brand/update/${this.form.id}`,this.form).then(e=>{this.$refs.modal1.closeModal(),this.toast.success("Registered successfully",{timeout:2e3}),this.resetForm(),this.loadData(),this.storing=!1}).catch(e=>{const i=e.response.data.errors;i.hasOwnProperty("name")&&(this.nameError=i.name[0]),this.toast.error(e.message,{timeout:6e3}),this.storing=!1})}).catch(e=>{e.path==="name"&&(this.nameError=e.errors[0]),this.storing=!1})}},mounted(){}},Y={class:"modal-groups"},Z={class:"py-3 flex justify-end space-x-3 border-t border-slate-100 dark:border-slate-700"},ee={key:1,type:"button",class:"px-3 py-2 bg-blue-600 flex items-center gap-2 rounded"},te=s("div",{class:"flex flex-row space-x-4"},[s("div",{class:"w-4 h-4 rounded-full animate-spin border-2 border-dashed border-white border-t-transparent"})],-1);function oe(t,e,i,E,a,l){const g=n("Textinput"),b=n("Button"),x=n("Modal");return d(),m("div",Y,[r(x,{showLabel:!1,title:i.formMode==="create"?"Create New Brand":"Update Brand",label:"Create Brand",labelClass:"btn-outline-primary h-10 flex items-center",ref:"modal1",themeClass:"bg-primary-500"},{default:c(()=>[s("form",{onSubmit:e[1]||(e[1]=L(h=>i.formMode==="create"?l.createItem():l.updateItem(),["prevent"])),class:"text-base text-slate-600 dark:text-slate-300"},[r(g,{type:"text",placeholder:"Brand Name",name:"name",modelValue:a.form.name,"onUpdate:modelValue":e[0]||(e[0]=h=>a.form.name=h),error:a.nameError,classInput:"h-[48px] mb-3"},null,8,["modelValue","error"]),s("div",Z,[a.storing?(d(),m("button",ee,[te,F(" Saving ")])):(d(),z(b,{key:0,type:"submit",text:"Save",btnClass:"btn-primary h-10 flex items-center"}))])],32)]),_:1},8,["title"])])}const ae=D(X,[["render",oe]]);const se={components:{Pagination:A,InputGroup:$,Dropdown:q,Icon:j,Card:R,MenuItem:W,Modal:B,Button:k,Textinput:I,FormModal:ae,Tooltip:N,Breadcrumb:K},data(){return{brands:[],toast:T(),formMode:"create",form:{name:"",email:"",role:"",phone_number:"",password:""},item:[],current:1,perpage:10,total:0,pageRange:1,searchTerm:"",actions:[{name:"view",icon:"heroicons-outline:eye"},{name:"edit",icon:"heroicons:pencil-square"},{name:"delete",icon:"heroicons-outline:trash"}],options:[{value:"1",label:"1"},{value:"3",label:"3"},{value:"5",label:"5"}],columns:[{label:"Id",field:"id"},{label:"Name",field:"name"},{label:"No. Products",field:"products_count"},{label:"Date",field:"created_at"},{label:"Action",field:"action"}]}},methods:{async FetchData(t=1){await _.get(`/api/admin/brands?page=${t}`,{withCredentials:!0}).then(e=>{this.brands=e.data.brands.data,this.total=e.data.brands.total,this.perpage=e.data.brands.per_page,this.current=e.data.brands.current_page}).catch(e=>{this.toast.error("Failed to fetch brands",{timeout:2e3})})},changePage(t){this.FetchData(t)},showCreateModal(){this.formMode="create",this.$refs.formModal1.resetForm(),this.$refs.formModal1.$refs.modal1.openModal()},showEditModal(t){this.formMode="edit",this.$refs.formModal1.resetForm(),this.item=t,this.$refs.formModal1.loadEditData(t),this.$refs.formModal1.$refs.modal1.openModal()},formatDate(t){const e=new Date(t),i={day:"2-digit",month:"short",year:"numeric"};return e.toLocaleDateString("en-US",i)},confirmDelete(t){confirm("Are you sure you want to delete this item?")&&this.deleteItem(t)},async deleteItem(t){await _.delete(`/api/admin/brand/delete/${t}`,{withCredentials:!0}).then(e=>{this.FetchData(),this.toast.success("Brand has been deleted successfully",{timeout:2e3})}).catch(e=>{this.toast.error("Failed to delete Brand",{timeout:2e3})})}},mounted(){this.FetchData()}},w=t=>(H("data-v-3185a76f"),t=t(),J(),t),re={class:""},ne={class:"flex justify-between flex-wrap items-start"},ie={class:"modal-groups"},le={class:"md:flex justify-between pb-6 md:space-y-0 space-y-3 items-center"},ce=w(()=>s("h5",null,"Brands",-1)),de={key:0,class:"flex"},me={class:"w-7 h-7 rounded-full ltr:mr-3 rtl:ml-3 flex-none"},ue=["src","alt"],he={class:"text-sm text-slate-600 dark:text-slate-300 capitalize"},pe={key:1},fe={key:2,class:"text-slate-500 dark:text-slate-300"},_e={key:3,class:"block w-full"},ge={key:4},be={class:"flex space-x-3 rtl:space-x-reverse"};const xe=["onClick"],we=w(()=>s("span",null," Edit",-1)),ye=["onClick"],ve=w(()=>s("span",null,"Delete",-1)),Ce={class:"py-4 px-3"};function Me(t,e,i,E,a,l){const g=n("Breadcrumb"),b=n("FormModal"),x=n("Button"),h=n("InputGroup"),y=n("Icon"),v=n("Tooltip"),P=n("Pagination"),S=n("vue-good-table"),V=n("Card");return d(),m("div",re,[s("div",ne,[r(g),s("div",ie,[r(b,{"load-data":l.FetchData,formMode:a.formMode,user:a.item,ref:"formModal1"},null,8,["load-data","formMode","user"]),r(x,{onClick:e[0]||(e[0]=o=>l.showCreateModal()),type:"submit",text:"Create Brand",btnClass:"btn-primary h-10 flex items-center"})])]),s("div",null,[r(V,{noborder:""},{default:c(()=>[s("div",le,[ce,r(h,{modelValue:a.searchTerm,"onUpdate:modelValue":e[1]||(e[1]=o=>a.searchTerm=o),placeholder:"Search",type:"text",prependIcon:"heroicons-outline:search",merged:""},null,8,["modelValue"])]),r(S,{columns:a.columns,styleClass:"vgt-table bordered centered",rows:a.brands,"pagination-options":{enabled:!0,perPage:a.perpage},"search-options":{enabled:!0,externalQuery:a.searchTerm}},{"table-row":c(o=>[o.column.field=="customer"?(d(),m("span",de,[s("span",me,[s("img",{src:o.row.customer.image,alt:o.row.customer.name,class:"object-cover w-full h-full rounded-full"},null,8,ue)]),s("span",he,f(o.row.customer.name),1)])):u("",!0),o.column.field=="order"?(d(),m("span",pe,f("#"+o.row.order),1)):u("",!0),o.column.field=="created_at"?(d(),m("span",fe,f(l.formatDate(o.row.created_at)),1)):u("",!0),o.column.field=="is_active"?(d(),m("span",_e,[s("span",{class:Q(["inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25",`${o.row.is_active===1?"text-success-500 bg-success-500":""} 
              ${o.row.is_active==="due"?"text-warning-500 bg-warning-500":""}
              ${o.row.is_active===0?"text-danger-500 bg-danger-500":""}
              
                `])},f(o.row.is_active==1?"Activated":"Deactivated"),3)])):u("",!0),o.column.field=="action"?(d(),m("span",ge,[s("div",be,[u("",!0),r(v,{placement:"top",arrow:"",theme:"dark"},{button:c(()=>[s("div",{onClick:p=>l.showEditModal(o.row),class:"action-btn"},[r(y,{icon:"heroicons:pencil-square"})],8,xe)]),default:c(()=>[we]),_:2},1024),r(v,{placement:"top",arrow:"",theme:"danger-500"},{button:c(()=>[s("div",{onClick:p=>l.confirmDelete(o.row.id),class:"action-btn"},[r(y,{icon:"heroicons:trash"})],8,ye)]),default:c(()=>[ve]),_:2},1024)])])):u("",!0)]),"pagination-bottom":c(o=>[s("div",Ce,[r(P,{total:a.total,current:a.current,"per-page":a.perpage,pageRange:a.pageRange,onPageChanged:e[2]||(e[2]=p=>{a.current=p,l.changePage(p)}),pageChanged:o.pageChanged,perPageChanged:o.perPageChanged,enableSearch:"",options:a.options},{default:c(()=>[F(" > ")]),_:2},1032,["total","current","per-page","pageRange","pageChanged","perPageChanged","options"])])]),_:1},8,["columns","rows","pagination-options","search-options"])]),_:1})])])}const We=D(se,[["render",Me],["__scopeId","data-v-3185a76f"]]);export{We as default};
