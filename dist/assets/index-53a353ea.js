import{D as T}from"./index-419b2a1f.js";import{C as R}from"./index-5b63b34b.js";import{I as w}from"./index-8bd2886e.js";import{I as N}from"./index-fc53d512.js";import{P as $}from"./index-6aa0e54f.js";import{B as q}from"./index-e5b31831.js";import{M as P}from"./Modal-b6922669.js";import{T as U}from"./index-97d86235.js";import{S as j}from"./index-d0b39234.js";import{c as k,a as c}from"./array-32517c55.js";import{_ as D,u as I,A as z,f as g,r as n,o as m,a as u,g as a,w as d,d as t,c as A,e as p,h as G,j as V,t as f,B as M,l as L}from"./index-583483ef.js";import{B as Q}from"./index-b9550106.js";import{b as H}from"./menu-ec6df042.js";import"./utils-54aeb6c8.js";import"./vue-cleave.min-92d6160a.js";import"./transition-8fa849a3.js";import"./focus-management-d710945a.js";import"./keyboard-10a19c7f.js";import"./use-outside-click-7f7a0170.js";import"./hidden-edfc4318.js";import"./micro-task-89dcd6af.js";import"./open-closed-1f291b1c.js";import"./use-resolve-button-type-ead5bebf.js";const J={data(){return{form:{name:"",email:"",role:"",password:"",telephone:""},nameError:"",emailError:"",roleError:"",passwordError:"",telephoneError:"",toast:I(),router:z(),roleOptions:[{value:"admin",label:"Admin"},{value:"vendor",label:"Vendor"},{value:"user",label:"User"}]}},components:{Modal:P,Button:q,Textinput:U,Select:j},props:{formMode:{type:String,required:!0},user:{type:Object,required:!0,default:[]},loadData:{type:Function,required:!0}},methods:{validator(){k({name:c().required("Name is required"),email:c().required("Email is required").email(),telephone:c().required("Phone number is required"),role:c().required("Role is required"),password:c().required("Password is required").min(8)}).validate({name:this.form.name,email:this.form.email,telephone:this.form.telephone,role:this.form.role,password:this.form.password})},loadEditData(s){console.log("Loading data form..."),this.form.id=s.id,this.form.name=s.name,this.form.telephone=s.telephone,this.form.email=s.email,this.form.role=s.role,console.log("Form after load",this.form)},resetForm(){this.form.name="",this.form.email="",this.form.role="",this.form.password="",this.form.telephone=""},createUser(){k({name:c().required("Name is required"),email:c().required("Email is required").email(),telephone:c().required("Phone number is required"),role:c().required("Role is required"),password:c().required("Password is required").min(8)}).validate({name:this.form.name,email:this.form.email,telephone:this.form.telephone,role:this.form.role,password:this.form.password}).then(()=>{console.log("Creating user..."),g.post("/api/admin/user/create",this.form,{withCredentials:!0}).then(e=>{this.$refs.modal1.closeModal(),this.toast.success("Registered successfully",{timeout:2e3}),this.resetForm(),this.loadData()}).catch(e=>{console.log("Error message: ",e);const o=e.response.data.errors;o.hasOwnProperty("name")&&(this.nameError=o.name[0]),o.hasOwnProperty("telephone")&&(this.telephoneError=o.telephone[0]),o.hasOwnProperty("email")&&(this.emailError=o.email[0]),o.hasOwnProperty("role")&&(this.emailError=o.role[0]),o.hasOwnProperty("password")&&(this.passwordError=o.password[0]),this.toast.error(e.message,{timeout:6e3})})}).catch(e=>{e.path==="name"?this.nameError=e.errors[0]:e.path==="email"?this.emailError=e.errors[0]:e.path==="role"?this.roleError=e.errors[0]:e.path==="password"?this.passwordError=e.errors[0]:e.path==="telephone"&&(this.telephoneError=e.errors[0])})},updateUser(){console.log("Updating user...",this.form),k({name:c().required("Name is required"),email:c().required("Email is required").email(),role:c().required("Role is required"),telephone:c().required("Phone number is required")}).validate({name:this.form.name,email:this.form.email,role:this.form.role,telephone:this.form.telephone}).then(()=>{console.log("Updating user...",this.form),g.put(`/api/admin/user/update/${this.form.id}`,this.form).then(e=>{this.$refs.modal1.closeModal(),this.toast.success("Registered successfully",{timeout:2e3}),this.resetForm(),console.log(e),this.loadData()}).catch(e=>{console.log("Error message: ",e);const o=e.response.data.errors;o.hasOwnProperty("name")&&(this.nameError=o.name[0]),o.hasOwnProperty("telephone")&&(this.telephoneError=o.telephone[0]),o.hasOwnProperty("email")&&(this.emailError=o.email[0]),o.hasOwnProperty("role")&&(this.emailError=o.role[0]),o.hasOwnProperty("password")&&(this.passwordError=o.password[0]),this.toast.error(e.message,{timeout:2e3})})}).catch(e=>{e.path==="name"?this.nameError=e.errors[0]:e.path==="email"?this.emailError=e.errors[0]:e.path==="role"?this.roleError=e.errors[0]:e.path==="password"?this.passwordError=e.errors[0]:e.path==="telephone"&&(this.telephoneError=e.errors[0])})}}},K={class:"modal-groups"},W={class:"py-3 flex justify-end space-x-3 border-t border-slate-100 dark:border-slate-700"};function X(s,e,o,y,r,h){const _=n("Textinput"),v=n("Select"),E=n("Button"),C=n("Modal");return m(),u("div",K,[a(C,{title:o.formMode==="create"?"Create New User":"Update User",label:"'Create User'",showLabel:!1,labelClass:"btn-outline-primary h-10 flex items-center",ref:"modal1",themeClass:"bg-primary-500"},{default:d(()=>[t("form",{onSubmit:e[5]||(e[5]=G(i=>o.formMode==="create"?h.createUser():h.updateUser(),["prevent"])),class:"text-base text-slate-600 dark:text-slate-300"},[a(_,{type:"text",placeholder:"Full Name",name:"name",modelValue:r.form.name,"onUpdate:modelValue":e[0]||(e[0]=i=>r.form.name=i),error:r.nameError,classInput:"h-[48px] mb-3"},null,8,["modelValue","error"]),a(_,{type:"email",placeholder:"Type your email",name:"email",modelValue:r.form.email,"onUpdate:modelValue":e[1]||(e[1]=i=>r.form.email=i),error:r.emailError,classInput:"h-[48px] mb-3"},null,8,["modelValue","error"]),a(_,{type:"tel",placeholder:"Type your phone number",name:"telephone",modelValue:r.form.telephone,"onUpdate:modelValue":e[2]||(e[2]=i=>r.form.telephone=i),error:r.emailError,classInput:"h-[48px] mb-3"},null,8,["modelValue","error"]),a(v,{modelValue:r.form.role,"onUpdate:modelValue":e[3]||(e[3]=i=>r.form.role=i),error:r.roleError,options:r.roleOptions,placeholder:"Select User's role",classInput:"h-[48px] mb-3"},null,8,["modelValue","error","options"]),o.formMode==="create"?(m(),A(_,{key:0,type:"password",placeholder:"8+ characters, 1 capital letter",name:"password",modelValue:r.form.password,"onUpdate:modelValue":e[4]||(e[4]=i=>r.form.password=i),error:r.passwordError,hasicon:"",classInput:"h-[48px]"},null,8,["modelValue","error"])):p("",!0),t("div",W,[a(E,{type:"submit",text:"Save",btnClass:"btn-primary h-10 flex items-center"})])],32)]),_:1},8,["title"])])}const Y=D(J,[["render",X]]),Z={class:"flex items-center space-x-3 rtl:space-x-reverse"},ee={key:1,class:"breadcrumbs"},te={class:"text-primary-500"},re={class:"breadcrumbs-icon rtl:transform rtl:rotate-180"},oe={class:"text-primary-500"},se={type:"button",class:"capitalize"},ae={class:"breadcrumbs-icon rtl:transform rtl:rotate-180"},le={class:"capitalize text-slate-500 dark:text-slate-400"},ie={__name:"Breadcrumbs2",setup(s){return(e,o)=>{const y=n("router-link");return m(),u("div",Z,[this.$route.name&&!this.$route.meta.groupParent?(m(),u("h4",{key:0,class:V([this.$route.meta.groupParent?"lg:border-r lg:border-secondary-500":"","font-medium lg:text-2xl text-xl capitalize text-slate-900 inline-block pr-4"])},f(this.$route.meta.groupParent),3)):p("",!0),this.$route.meta.groupParent?(m(),u("ul",ee,[t("li",te,[a(y,{to:{nam:"home"},class:"text-lg"},{default:d(()=>[a(M(w),{icon:"heroicons-outline:home"})]),_:1}),t("span",re,[a(M(w),{icon:"heroicons:chevron-right"})])]),t("li",oe,[t("button",se,f(this.$route.name),1),t("span",ae,[a(M(w),{icon:"heroicons:chevron-right"})])]),t("li",le,f(this.$route.meta.groupParent),1)])):p("",!0)])}}},ne={components:{Pagination:$,InputGroup:N,Dropdown:T,Icon:w,Card:R,MenuItem:H,Modal:P,Button:q,Textinput:U,FormModal:Y,Breadcrumb:Q,Breadcrumbs2:ie},data(){return{users:[],toast:I(),formMode:"create",form:{name:"",email:"",role:"",phone_number:"",password:""},user:[],current:1,perpage:10,total:0,pageRange:1,searchTerm:"",actions:[{name:"view",icon:"heroicons-outline:eye"},{name:"edit",icon:"heroicons:pencil-square"},{name:"delete",icon:"heroicons-outline:trash"}],options:[{value:"1",label:"1"},{value:"3",label:"3"},{value:"5",label:"5"}],columns:[{label:"Id",field:"id"},{label:"Name",field:"name"},{label:"Email",field:"email"},{label:"Role",field:"role"},{label:"Status",field:"is_active"},{label:"Date",field:"created_at"},{label:"Action",field:"action"}]}},methods:{async FetchData(s=1){await g.get(`/api/admin/users?page=${s}`,{withCredentials:!0}).then(e=>{this.users=e.data.users.data,this.total=e.data.users.total,this.perpage=e.data.users.per_page,this.current=e.data.users.current_page}).catch(e=>{this.toast.error("Failed to fetch Users",{timeout:2e3}),console.log(e)})},changePage(s){this.FetchData(s)},formatDate(s){const e=new Date(s),o={day:"2-digit",month:"short",year:"numeric"};return e.toLocaleDateString("en-US",o)},showCreateModal(){this.formMode="create",this.$refs.formModal1.resetForm(),this.$refs.formModal1.$refs.modal1.openModal()},showEditModal(s){this.formMode="edit",this.$refs.formModal1.resetForm(),this.user=s,this.$refs.formModal1.loadEditData(s),this.$refs.formModal1.$refs.modal1.openModal()},confirmDelete(s){confirm("Are you sure you want to delete this item?")&&this.deleteItem(s)},async deleteItem(s){await g.delete(`/api/admin/user/delete/${s}`,{withCredentials:!0}).then(e=>{this.FetchData(),this.toast.success("User has been deleted successfully",{timeout:2e3})}).catch(e=>{this.toast.error("Failed to delete Users",{timeout:2e3}),console.log(e)})},async activateItem(s){await g.get(`/api/admin/user/activate/${s}`,{withCredentials:!0}).then(e=>{this.FetchData(),this.toast.success("User has been activated successfully",{timeout:2e3}),console.table(this.users)}).catch(e=>{this.toast.error("Failed to activate Users",{timeout:2e3}),console.log(e)})},async deactivateItem(s){await g.get(`/api/admin/user/deactivate/${s}`,{withCredentials:!0}).then(e=>{this.FetchData(),this.toast.success("User has been deactivated successfully",{timeout:2e3}),console.table(this.users)}).catch(e=>{this.toast.error("Failed to deactivate Users",{timeout:2e3}),console.log(e)})}},mounted(){this.FetchData()}},ce={class:""},me={class:"flex justify-between flex-wrap items-start"},de={class:"modal-groups"},ue={class:"md:flex justify-between pb-6 md:space-y-0 space-y-3 items-center"},he=t("h5",null,"Articles",-1),pe={key:0,class:"flex"},fe={class:"w-7 h-7 rounded-full ltr:mr-3 rtl:ml-3 flex-none"},_e=["src","alt"],be={class:"text-sm text-slate-600 dark:text-slate-300 capitalize"},ge={key:1},xe={key:2,class:"text-slate-500 dark:text-slate-300"},we={key:3,class:"block w-full"},ye={key:4},ve={class:"text-xl"},Ee={class:"hover:bg-slate-900 hover:text-white dark:hover:bg-slate-600 dark:hover:bg-opacity-50 w-full border-b border-b-gray-500 border-opacity-10 px-4 py-2 text-sm last:mb-0 cursor-pointer first:rounded-t last:rounded-b flex space-x-2 items-center rtl:space-x-reverse"},Ce={class:"text-base"},ke=t("span",null,"View",-1),Me=["onClick"],qe={class:"text-base"},Pe=t("span",null,"Update",-1),Ue=["onClick"],De={class:"text-base"},Ie=t("span",null,"Deactivate",-1),Ve=["onClick"],Fe={class:"text-base"},Be=t("span",null,"activate",-1),Se=["onClick"],Oe={class:"text-base"},Te=t("span",null,"Delete",-1),Re={class:"py-4 px-3"};function Ne(s,e,o,y,r,h){const _=n("Breadcrumb"),v=n("FormModal"),E=n("Button"),C=n("InputGroup"),i=n("Icon"),x=n("MenuItem"),F=n("Dropdown"),B=n("Pagination"),S=n("vue-good-table"),O=n("Card");return m(),u("div",ce,[t("div",me,[a(_),t("div",de,[a(v,{"load-data":h.FetchData,formMode:r.formMode,user:r.user,ref:"formModal1"},null,8,["load-data","formMode","user"]),a(E,{onClick:e[0]||(e[0]=l=>h.showCreateModal()),type:"submit",text:"Create User",btnClass:"btn-primary h-10 flex items-center"})])]),t("div",null,[a(O,{noborder:""},{default:d(()=>[t("div",ue,[he,a(C,{modelValue:r.searchTerm,"onUpdate:modelValue":e[1]||(e[1]=l=>r.searchTerm=l),placeholder:"Search",type:"text",prependIcon:"heroicons-outline:search",merged:""},null,8,["modelValue"])]),a(S,{columns:r.columns,styleClass:"vgt-table bordered centered",rows:r.users,"pagination-options":{enabled:!0,perPage:r.perpage},"search-options":{enabled:!0,externalQuery:r.searchTerm}},{"table-row":d(l=>[l.column.field=="customer"?(m(),u("span",pe,[t("span",fe,[t("img",{src:l.row.customer.image,alt:l.row.customer.name,class:"object-cover w-full h-full rounded-full"},null,8,_e)]),t("span",be,f(l.row.customer.name),1)])):p("",!0),l.column.field=="order"?(m(),u("span",ge,f("#"+l.row.order),1)):p("",!0),l.column.field=="created_at"?(m(),u("span",xe,f(h.formatDate(l.row.created_at)),1)):p("",!0),l.column.field=="is_active"?(m(),u("span",we,[t("span",{class:V(["inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25",`${l.row.is_active===1?"text-success-500 bg-success-500":""} 
              ${l.row.is_active==="due"?"text-warning-500 bg-warning-500":""}
              ${l.row.is_active===0?"text-danger-500 bg-danger-500":""}
              
                `])},f(l.row.is_active==1?"Activated":"Deactivated"),3)])):p("",!0),l.column.field=="action"?(m(),u("span",ye,[a(F,{classMenuItems:"w-[140px] z-50"},{menus:d(()=>[a(x,null,{default:d(()=>[t("div",Ee,[t("span",Ce,[a(i,{icon:"heroicons-outline:eye"})]),ke])]),_:1}),a(x,null,{default:d(()=>[t("div",{onClick:b=>h.showEditModal(l.row),class:"hover:bg-slate-900 hover:text-white dark:hover:bg-slate-600 dark:hover:bg-opacity-50 w-full border-b border-b-gray-500 border-opacity-10 px-4 py-2 text-sm last:mb-0 cursor-pointer first:rounded-t last:rounded-b flex space-x-2 items-center rtl:space-x-reverse"},[t("span",qe,[a(i,{icon:"heroicons:pencil-square"})]),Pe],8,Me)]),_:2},1024),a(x,null,{default:d(()=>[l.row.is_active==1?(m(),u("div",{key:0,onClick:b=>h.deactivateItem(l.row.id),class:"hover:bg-slate-900 hover:text-white dark:hover:bg-slate-600 dark:hover:bg-opacity-50 w-full border-b border-b-gray-500 border-opacity-10 px-4 py-2 text-sm last:mb-0 cursor-pointer first:rounded-t last:rounded-b flex space-x-2 items-center rtl:space-x-reverse"},[t("span",De,[a(i,{icon:"heroicons-outline:no-symbol"})]),Ie],8,Ue)):(m(),u("div",{key:1,onClick:b=>h.activateItem(l.row.id),class:"bg-green-500 text-green-500 bg-opacity-30 hover:bg-opacity-100 hover:text-white w-full border-b border-b-gray-500 border-opacity-10 px-4 py-2 text-sm last:mb-0 cursor-pointer first:rounded-t last:rounded-b flex space-x-2 items-center rtl:space-x-reverse"},[t("span",Fe,[a(i,{icon:"heroicons-outline:check-badge"})]),Be],8,Ve))]),_:2},1024),a(x,null,{default:d(()=>[t("div",{onClick:b=>h.confirmDelete(l.row.id),class:"bg-danger-500 text-danger-500 bg-opacity-30 hover:bg-opacity-100 hover:text-white w-full border-b border-b-gray-500 border-opacity-10 px-4 py-2 text-sm last:mb-0 cursor-pointer first:rounded-t last:rounded-b flex space-x-2 items-center rtl:space-x-reverse"},[t("span",Oe,[a(i,{icon:"heroicons-outline:trash"})]),Te],8,Se)]),_:2},1024)]),default:d(()=>[t("span",ve,[a(i,{icon:"heroicons-outline:dots-vertical"})])]),_:2},1024)])):p("",!0)]),"pagination-bottom":d(l=>[t("div",Re,[a(B,{total:r.total,current:r.current,"per-page":r.perpage,pageRange:r.pageRange,onPageChanged:e[2]||(e[2]=b=>{r.current=b,h.changePage(b)}),pageChanged:l.pageChanged,perPageChanged:l.perPageChanged,enableSearch:"",options:r.options},{default:d(()=>[L(" > ")]),_:2},1032,["total","current","per-page","pageRange","pageChanged","perPageChanged","options"])])]),_:1},8,["columns","rows","pagination-options","search-options"])]),_:1})])])}const ct=D(ne,[["render",Ne]]);export{ct as default};
