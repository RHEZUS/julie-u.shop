import{T as P}from"./index-40b8fec9.js";import{D as N}from"./index-6cc38092.js";import{C as q}from"./index-4d5229ff.js";import{I as O}from"./index-24184b10.js";import{I as R}from"./index-8518c483.js";import{P as U}from"./index-1fc41d74.js";import{B as E}from"./index-e7eae902.js";import{M as I}from"./Modal-446f2618.js";import{T as k}from"./index-02df90dc.js";import{T as j}from"./index-8b2d9fc5.js";import{S as A}from"./index-9ab38ad2.js";import{c as C,a as f,b as G}from"./object-322f5161.js";import{_ as D,u as F,e as z,f as h,r as i,o as m,c as p,b as n,w as l,a as s,i as L,t as g,h as u,g as Q,d as H,R as J,S as K}from"./index-d4e36e68.js";import{B as W}from"./index-204b4c84.js";import{b as X}from"./menu-11f54084.js";import"./vue-cleave.min-9b07980f.js";import"./transition-95132db0.js";import"./focus-management-d215751d.js";import"./keyboard-cfbfc5c4.js";import"./use-outside-click-6207c2b7.js";import"./hidden-a684ad21.js";import"./micro-task-89dcd6af.js";import"./open-closed-3f19f0e4.js";import"./use-resolve-button-type-aa297724.js";const Y={data(){return{form:{name:"",parent_category_id:"",desc:""},nameError:"",parentError:"",descError:"",toast:F(),router:z(),formOptions:[]}},components:{Modal:I,Button:E,Textinput:k,Select:A,Textarea:j},props:{formMode:{type:String,required:!0},user:{type:Object,required:!0,default:[]},loadData:{type:Function,required:!0}},methods:{validator(){C({name:f().required("Name is required")}).validate({name:this.form.name})},async FetchData(){await h.get("/api/admin/categories/id-name",{withCredentials:!0}).then(t=>{this.formOptions=t.data.categories}).catch(t=>{this.toast.error("Failed to fetch categories",{timeout:2e3})})},loadEditData(t){this.form.id=t.id,this.form.name=t.name,this.form.parent_category_id=t.parent_category_id,this.form.desc=t.desc},resetForm(){this.form.name="",this.form.parent_category_id="",this.form.desc="",this.nameError="",this.parentError="",this.descError=""},createItem(){C({name:f().required("Name is required"),parent_category_id:G().nullable(),desc:f().nullable()}).validate({name:this.form.name,parent_category_id:this.form.parent_category_id,desc:this.form.desc}).then(()=>{h.post("/api/admin/category/create",this.form,{withCredentials:!0}).then(e=>{this.$refs.modal1.closeModal(),this.toast.success("Registered successfully",{timeout:2e3}),this.resetForm(),this.loadData()}).catch(e=>{const a=e.response.data.errors;a.hasOwnProperty("name")&&(this.nameError=a.name[0]),a.hasOwnProperty("parent_category_id")&&(this.parentError=a.parent_category_id[0]),a.hasOwnProperty("desc")&&(this.descError=a.desc[0]),this.toast.error(e.message,{timeout:6e3})})}).catch(e=>{e.path==="name"?this.nameError=e.errors[0]:e.path==="parent_category_id"?this.parentError=e.errors[0]:e.path==="desc"&&(this.descError=e.errors[0])})},updateItem(){C({name:f().required("Name is required")}).validate({name:this.form.name}).then(()=>{h.put(`/api/admin/category/update/${this.form.id}`,this.form).then(e=>{this.$refs.modal1.closeModal(),this.toast.success("Registered successfully",{timeout:2e3}),this.resetForm(),this.loadData()}).catch(e=>{const a=e.response.data.errors;a.hasOwnProperty("name")&&(this.nameError=a.name[0]),a.hasOwnProperty("parent_category_id")&&(this.parentError=a.parent_category_id[0]),a.hasOwnProperty("desc")&&(this.descError=a.desc[0]),this.toast.error(e.message,{timeout:6e3})})}).catch(e=>{e.path==="name"?this.nameError=e.errors[0]:e.path==="parent_category_id"?this.parentError=e.errors[0]:e.path==="desc"&&(this.descError=e.errors[0])})}},mounted(){this.FetchData()}},Z={class:"modal-groups"},$={class:"py-3 flex justify-end space-x-3 border-t border-slate-100 dark:border-slate-700"};function ee(t,e,a,T,o,d){const y=i("Textinput"),b=i("Select"),w=i("Textarea"),x=i("Button"),_=i("Modal");return m(),p("div",Z,[n(_,{showLabel:!1,title:a.formMode==="create"?"Create New Category":"Update Category",label:"Create User",labelClass:"btn-outline-primary h-10 flex items-center",ref:"modal1",themeClass:"bg-primary-500"},{default:l(()=>[s("form",{onSubmit:e[3]||(e[3]=L(c=>a.formMode==="create"?d.createItem():d.updateItem(),["prevent"])),class:"text-base text-slate-600 dark:text-slate-300"},[n(y,{type:"text",placeholder:"Full Name",name:"name",modelValue:o.form.name,"onUpdate:modelValue":e[0]||(e[0]=c=>o.form.name=c),error:o.nameError,classInput:"h-[48px] mb-3"},null,8,["modelValue","error"]),n(b,{modelValue:o.form.parent_category_id,"onUpdate:modelValue":e[1]||(e[1]=c=>o.form.parent_category_id=c),error:o.parentError,options:o.formOptions,placeholder:"Select parent category",classInput:"h-[48px] mb-3"},null,8,["modelValue","error","options"]),n(w,{placeholder:"Description of the category",modelValue:o.form.desc,"onUpdate:modelValue":e[2]||(e[2]=c=>o.form.desc=c),error:o.descError,hasicon:"",classInput:"min-h-[48px]"},null,8,["modelValue","error"]),s("div",$,[n(x,{type:"submit",text:"Save",btnClass:"btn-primary h-10 flex items-center"})])],32)]),_:1},8,["title"])])}const te=D(Y,[["render",ee]]);const oe={components:{Pagination:U,InputGroup:R,Dropdown:N,Icon:O,Card:q,MenuItem:X,Modal:I,Button:E,Textinput:k,FormModal:te,Tooltip:P,Breadcrumb:W},data(){return{categories:[],toast:F(),formMode:"create",form:{name:"",email:"",role:"",phone_number:"",password:""},item:[],current:1,perpage:10,pageRange:1,searchTerm:"",actions:[{name:"view",icon:"heroicons-outline:eye"},{name:"edit",icon:"heroicons:pencil-square"},{name:"delete",icon:"heroicons-outline:trash"}],options:[{value:"1",label:"1"},{value:"3",label:"3"},{value:"5",label:"5"}],columns:[{label:"Id",field:"id"},{label:"Name",field:"name"},{label:"No. Products",field:"products_count"},{label:"Date",field:"created_at"},{label:"Action",field:"action"}]}},methods:{async FetchData(){await h.get("/api/admin/categories",{withCredentials:!0}).then(t=>{this.categories=t.data.categories}).catch(t=>{this.toast.error("Failed to fetch categories",{timeout:2e3})})},showCreateModal(){this.formMode="create",this.$refs.formModal1.resetForm(),this.$refs.formModal1.$refs.modal1.openModal()},showEditModal(t){this.formMode="edit",this.$refs.formModal1.resetForm(),this.item=t,this.$refs.formModal1.loadEditData(t),this.$refs.formModal1.$refs.modal1.openModal()},formatDate(t){const e=new Date(t),a={day:"2-digit",month:"short",year:"numeric"};return e.toLocaleDateString("en-US",a)},confirmDelete(t){confirm("Are you sure you want to delete this item?")&&this.deleteItem(t)},async deleteItem(t){await h.delete(`/api/admin/category/delete/${t}`,{withCredentials:!0}).then(e=>{this.FetchData(),this.toast.success("Category has been deleted successfully",{timeout:2e3})}).catch(e=>{this.toast.error("Failed to delete Category",{timeout:2e3})})}},mounted(){this.FetchData()}},M=t=>(J("data-v-458939c3"),t=t(),K(),t),re={class:""},ae={class:"flex justify-between flex-wrap items-start"},se={class:"modal-groups"},ne={class:"md:flex justify-between pb-6 md:space-y-0 space-y-3 items-center"},ie=M(()=>s("h5",null,"Categories",-1)),ce={key:0,class:"flex"},le={class:"w-7 h-7 rounded-full ltr:mr-3 rtl:ml-3 flex-none"},de=["src","alt"],me={class:"text-sm text-slate-600 dark:text-slate-300 capitalize"},pe={key:1},ue={key:2,class:"text-slate-500 dark:text-slate-300"},he={key:3,class:"block w-full"},_e={key:4},fe={class:"flex space-x-3 rtl:space-x-reverse"};const ge=["onClick"],ye=M(()=>s("span",null," Edit",-1)),be=["onClick"],we=M(()=>s("span",null,"Delete",-1)),xe={class:"py-4 px-3"};function ve(t,e,a,T,o,d){const y=i("Breadcrumb"),b=i("FormModal"),w=i("Button"),x=i("InputGroup"),_=i("Icon"),c=i("Tooltip"),V=i("Pagination"),B=i("vue-good-table"),S=i("Card");return m(),p("div",re,[s("div",ae,[n(y),s("div",se,[n(b,{"load-data":d.FetchData,formMode:o.formMode,user:o.item,ref:"formModal1"},null,8,["load-data","formMode","user"]),n(w,{onClick:e[0]||(e[0]=r=>d.showCreateModal()),type:"submit",text:"Create Category",btnClass:"btn-primary h-10 flex items-center"})])]),s("div",null,[n(S,{noborder:""},{default:l(()=>[s("div",ne,[ie,n(x,{modelValue:o.searchTerm,"onUpdate:modelValue":e[1]||(e[1]=r=>o.searchTerm=r),placeholder:"Search",type:"text",prependIcon:"heroicons-outline:search",merged:""},null,8,["modelValue"])]),n(B,{columns:o.columns,styleClass:"vgt-table bordered centered",rows:o.categories,"pagination-options":{enabled:!0,perPage:o.perpage},"search-options":{enabled:!0,externalQuery:o.searchTerm}},{"table-row":l(r=>[r.column.field=="customer"?(m(),p("span",ce,[s("span",le,[s("img",{src:r.row.customer.image,alt:r.row.customer.name,class:"object-cover w-full h-full rounded-full"},null,8,de)]),s("span",me,g(r.row.customer.name),1)])):u("",!0),r.column.field=="order"?(m(),p("span",pe,g("#"+r.row.order),1)):u("",!0),r.column.field=="created_at"?(m(),p("span",ue,g(d.formatDate(r.row.created_at)),1)):u("",!0),r.column.field=="is_active"?(m(),p("span",he,[s("span",{class:Q(["inline-block px-3 min-w-[90px] text-center mx-auto py-1 rounded-[999px] bg-opacity-25",`${r.row.is_active===1?"text-success-500 bg-success-500":""} 
              ${r.row.is_active==="due"?"text-warning-500 bg-warning-500":""}
              ${r.row.is_active===0?"text-danger-500 bg-danger-500":""}
              
                `])},g(r.row.is_active==1?"Activated":"Deactivated"),3)])):u("",!0),r.column.field=="action"?(m(),p("span",_e,[s("div",fe,[u("",!0),n(c,{placement:"top",arrow:"",theme:"dark"},{button:l(()=>[s("div",{onClick:v=>d.showEditModal(r.row),class:"action-btn"},[n(_,{icon:"heroicons:pencil-square"})],8,ge)]),default:l(()=>[ye]),_:2},1024),n(c,{placement:"top",arrow:"",theme:"danger-500"},{button:l(()=>[s("div",{onClick:v=>d.confirmDelete(r.row.id),class:"action-btn"},[n(_,{icon:"heroicons:trash"})],8,be)]),default:l(()=>[we]),_:2},1024)])])):u("",!0)]),"pagination-bottom":l(r=>[s("div",xe,[n(V,{total:50,current:o.current,"per-page":o.perpage,pageRange:o.pageRange,onPageChanged:e[2]||(e[2]=v=>o.current=v),pageChanged:r.pageChanged,perPageChanged:r.perPageChanged,enableSearch:"",options:o.options},{default:l(()=>[H(" > ")]),_:2},1032,["current","per-page","pageRange","pageChanged","perPageChanged","options"])])]),_:1},8,["columns","rows","pagination-options","search-options"])]),_:1})])])}const Ke=D(oe,[["render",ve],["__scopeId","data-v-458939c3"]]);export{Ke as default};
