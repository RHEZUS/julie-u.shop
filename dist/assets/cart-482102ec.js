import{M as v,H as S,F as C,P as k}from"./index-aa5ed6dd.js";import{_ as N,f as h,a as n,g as i,d as t,F as f,b as g,e as p,r as u,o as r,t as _,p as w,m as F}from"./index-9b4a819b.js";import{B as J}from"./index-0543b3cb.js";import{I as O}from"./index-9a8c00d9.js";import"./transition-2cc5eee0.js";import"./focus-management-4ae2c282.js";import"./keyboard-307349a2.js";import"./use-outside-click-6b0724f0.js";import"./hidden-cdb3f715.js";import"./micro-task-89dcd6af.js";import"./open-closed-5bb7d610.js";const q={data(){return{apiUrl:h,cartItems:[],products:[],loading:!1,cart:JSON.parse(localStorage.getItem("cart"))}},components:{Modal:v,Button:J,Header:S,Footer:C,ProductCart:k,Icon:O},methods:{async getCartItems(){let s=JSON.parse(localStorage.getItem("cart"));for(let e=s.length-1;e>=0;e--)typeof s[e]!="object"&&s.splice(e,1);console.log(s),s.length>0&&await h.post("api/cart/items",{productVariantIds:s}).then(e=>{let o=e.data.products;for(let a=0;a<o.length;a++)o[a].quantity=s.find(c=>c.productVariantId==o[a].id).quantity;this.cartItems=o}).catch(e=>{console.log(e)})},addQuantity(s){let e=JSON.parse(localStorage.getItem("cart")),o=e.findIndex(a=>a.productVariantId==s);e[o].quantity++,localStorage.setItem("cart",JSON.stringify(e)),this.getCartItems()},reduceQuantity(s){let e=JSON.parse(localStorage.getItem("cart")),o=e.findIndex(a=>a.productVariantId==s);e[o].quantity>1&&(e[o].quantity--,localStorage.setItem("cart",JSON.stringify(e)),this.getCartItems())},updateQuantity(s,e){let o=JSON.parse(localStorage.getItem("cart")),a=o.findIndex(c=>c.productVariantId==s);o[a].quantity=e,localStorage.setItem("cart",JSON.stringify(o)),this.getCartItems()}},async mounted(){this.getCartItems()}},d=s=>(w("data-v-67d75ed8"),s=s(),F(),s),V={key:0,class:"bg-white"},P={key:0,class:"px-2 md:px-10 min-h-80 py-10 grid grid-cols-12 gap-6"},Q=d(()=>t("div",{class:"col-span-full"},[t("h1",{class:"text-2xl font-bold text-center"},"You may also like")],-1)),B={class:"col-span-full"},H={class:"table-auto w-full"},j=d(()=>t("thead",null,[t("tr",{class:"border-b"},[t("th",{scope:"col",class:"table-th font-medium py-3 text-left"}," Product"),t("th",{scope:"col",class:"table-th font-medium py-3 text-left"},"Price"),t("th",{scope:"col",class:"table-th font-medium py-3 text-left"},"Quantity"),t("th",{scope:"col",class:"table-th font-medium py-3 text-left"},"Total")])],-1)),D={class:"table-td md:px-5 px-3 py-3 text-left"},M={class:"flex items-center"},Y=["src"],A={class:"ml-3"},E={class:"text-sm font-semibold"},L=d(()=>t("button",null,"Delete",-1)),T={class:"table-td md:px-5 px-3 py-3 text-left"},U={class:"text-sm font-semibold"},z={class:"table-td md:px-5 px-3 py-3 text-left"},G={class:"col-span-4 max-w-40 h-12 text-xl relative bg-white border border-black rounded"},K=["onClick"],R=["value"],W=["onClick"],X={class:"table-td md:px-5 px-3 py-3 text-left"},Z={class:"text-sm font-semibold"},$=d(()=>t("div",{class:"col-span-full md:col-span-4"}," checkout ",-1)),tt={key:1,class:"px-2 md:px-10 min-h-80 py-10 grid grid-cols-12 gap-6"},et=d(()=>t("div",{class:"col-span-full"},[t("h1",{class:"text-2xl font-bold text-center"},"You may also like")],-1)),st={class:"col-span-6 sm:col-span-6 md:col-span-4 lg:col-span-3 border"};function ot(s,e,o,a,c,m){const x=u("Header"),y=u("ProductCart"),b=u("Footer");return c.loading?p("",!0):(r(),n("div",V,[i(x),c.cartItems&&c.cartItems.length>0?(r(),n("div",P,[Q,t("div",B,[t("table",H,[j,t("tbody",null,[(r(!0),n(f,null,g(c.cartItems,l=>(r(),n("tr",{key:l.id,class:"border-b"},[t("td",D,[t("div",M,[t("img",{src:JSON.parse(l.product.images_urls)[0],alt:"product",class:"w-20 h-20 object-cover"},null,8,Y),t("div",A,[t("p",E,_(l.product.title),1),L])])]),t("td",T,[t("p",U,_(l.price),1)]),t("td",z,[t("div",G,[t("button",{onClick:I=>m.reduceQuantity(l.id),type:"button",class:"absolute w-[30px] h-full bg-transparent"},"-",8,K),t("input",{value:l.quantity,class:"w-full h-full text-center outline-none border-none focus:ring-0 bg-transparent",readonly:"",type:"text",name:"",id:"",style:{padding:"0 30px"}},null,8,R),t("button",{onClick:I=>m.addQuantity(l.id),type:"button",class:"absolute w-[30px] h-full bg-transparent right-0"},"+",8,W)])]),t("td",X,[t("p",Z,_((l.price*l.quantity).toFixed(2)+" FCFA"),1)])]))),128))])])]),$])):p("",!0),c.products.length>0?(r(),n("div",tt,[et,(r(!0),n(f,null,g(c.products.slice(3,8),l=>(r(),n("div",st,[i(y,{product:l},null,8,["product"])]))),256))])):p("",!0),i(b)]))}const ht=N(q,[["render",ot],["__scopeId","data-v-67d75ed8"]]);export{ht as default};
